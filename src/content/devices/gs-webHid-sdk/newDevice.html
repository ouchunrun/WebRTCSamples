<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="#" />
    <link rel="stylesheet" href="main.css">
    <style>
        button{
            display: block;
        }
        b{
            font-size: 16px;
            color: blue;
        }
        strong{
            font-size: 16px;
            color: red;
        }
    </style>
    <title>add new hid device</title>
</head>
<body>
<div id="container">
    <h1>add new device</h1>
    <button onclick="getDevice()">点击获取设备列表</button>
    <hr>

    <h2>按照下面进行提示进行操作</h2>
    <p style="color: red;font-weight: 400;">注：开始设置设备前请确定设备已插入，并恢复设备的接听键和静音键状态(初始状态均不亮灯)</p>
    <div>
        <h2>【offHook】摘机：</h2>
        <button onclick="setAction('offHook')">步骤1：<strong>点击按钮</strong>，按下 <b>接听键</b>，让接听键处于亮灯状态</button>
        <button onclick="setAction('offHookVolumeUp')">步骤2：<strong>点击按钮</strong>，按下 <b>音量+</b></button>
        <button onclick="setAction('offHookVolumeDown')">步骤3：<strong>点击按钮</strong>，按下 <b>音量-</b></button>
        <button onclick="setAction('offHookMuteOn')">步骤4：<strong>点击按钮</strong>，按下 <b>静音键</b>，让静音键处于亮灯状态</button>
        <button onclick="setAction('offHookMuteOff')">步骤5：<strong>点击按钮</strong>，按下 <b>静音键</b>，恢复静音键状态</button>
        <h2>【onHook】挂机：</h2>
        <button onclick="setAction('onHook')">步骤6：<strong>点击按钮</strong>，按下 <b>接听键</b>，恢复接听键为不亮灯状态</button>
        <button onclick="setAction('onHookVolumeUp')">步骤7：<strong>点击按钮</strong>，按下 <b>音量+</b></button>
        <button onclick="setAction('onHookVolumeDown')">步骤8：<strong>点击按钮</strong>，按下 <b>音量-</b></button>
        <button onclick="setAction('onHookMuteOn')">步骤9：<strong>点击按钮</strong>，按下 <b>静音键</b>，让静音键处于亮灯状态</button>
        <button onclick="setAction('onHookMuteOff')">步骤10：<strong>点击按钮</strong>，按下 <b>静音键</b>取消静音，恢复静音键状态</button>

        <button onclick="setAction('done')">如果已经按照上诉步骤完成操作，<strong>请点击这里(done)</strong></button>
    </div>
</div>

<script type="application/javascript" src="debug.js"></script>
<script type="application/javascript" src="webHid.js"></script>
<script>
	/* Log Debug Start */
	let log = {}
	log.debug = window.debug('webHid:DEBUG')
	log.log = window.debug('webHid:LOG')
	log.info = window.debug('webHid:INFO')
	log.warn = window.debug('webHid:WARN')
	log.error = window.debug('webHid:ERROR')
	/* Log Debug End */
	let webHid
	let deviceFilter = {
		filters:  []
	}
	window.onload = async function (){
		console.log('windows onload...')
		webHid = new WebHID({deviceFilter: deviceFilter,})
	}

    function setAction(action){
		if(!action){
			return
        }
	    console.warn("当前操作deviceAction:", action)
	    webHid.setDeviceAction(action)
    }

	async function getDevice(){
		console.log('获取设备列表')
        await webHid.asyncGetDeviceInputCommand()
    }
</script>
</body>
</html>
